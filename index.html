<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixlMuse AI Image Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        :root {
            --bg-color: #f5f7fa;
            --text-color: #333;
            --card-bg: #ffffff;
            --btn-secondary: #e0e0e0;
            --placeholder-bg: #e0e0e0;
            --placeholder-text: #888;
            --shadow: 0 10px 20px rgba(0,0,0,0.1);
            --border-radius: 20px;
            --placeholder-bg-gradient: linear-gradient(135deg, #b8b8b8, #f5f7fa);
            --placeholder-text: #333;
            --border-radius: 20px;
            --shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            --btn-primary: linear-gradient(90deg, #00c6ff, #0072ff);
        }

        .dark-mode {
            --bg-color: hsl(240, 51%, 14%);
            --text-color: #f0f0f0;
            --card-bg: #00295f;
            --btn-primary: linear-gradient(45deg, #9c27b0 0%, #3f51b5 100%);
            --btn-secondary: #4a4a4a;
            --placeholder-bg: #2a2a3a;
            --placeholder-text: #aaa;
            --shadow: 0 10px 20px rgba(0,0,0,0.3);
        }

        body {
            font-family: 'Arial', sans-serif;
            background: var(--bg-color);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-color);
            transition: all 0.3s ease;
        }

        .container {
            max-width: 900px;
            width: 100%;
            text-align: center;
        }

        h1 {
            position: relative;
            background: var(--btn-primary); /* gradient warna */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
            margin-bottom: 30px;
            font-size: 2.5rem;
            display: inline-block;
            overflow: hidden;

            /* Efek 3D text-shadow */
            text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.2);

            /* Efek swing */
            animation: swing 3s ease-in-out infinite;
            transform-origin: top center;
        }

        h1::after {
            content: '';
            position: absolute;
            top: 0;
            left: -75%;
            width: 50%;
            height: 100%;
            background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            animation: shine 2s infinite;
            z-index: 1;
            pointer-events: none;
        }

        /* Animasi swing (mengayun) */
        @keyframes swing {
            0%   { transform: rotate(0deg); }
            25%  { transform: rotate(1.5deg); }
            50%  { transform: rotate(0deg); }
            75%  { transform: rotate(-1.5deg); }
            100% { transform: rotate(0deg); }
        }

        h1 {
            background: linear-gradient(
                -176deg,
                #ffdf27,
                #00c6ff,
                #0072ff
            );
            background-size: 200% 100%; /* Lebar background 2x teks supaya bisa digeser */
            background-position: 200% center; /* Mulai posisi luar kanan */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;

            margin-bottom: 30px;
            font-size: 2.5rem;
            font-weight: bold;
            display: inline-block;

            animation: shine-text 3s linear infinite;
        }

        @keyframes shine-text {
            0% {
                background-position: 200% center;
            }
            100% {
                background-position: -50% center;
            }
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--btn-secondary);
            border: none;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .generate-btn {
            background: var(--btn-primary, #6a00ff);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 1.5rem;
            border-radius: 60px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin: 0 auto 30px;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
            transition: transform 0.3s, box-shadow 0.3s, background 0.3s;
            position: relative;
            overflow: hidden;
            min-width: 220px;
        }

        .generate-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.35);
            background: var(--btn-hover, #5800cc);
        }

        .generate-btn i {
            font-size: 1.8rem;
        }

        @media (min-width: 768px) {
            .generate-btn {
                padding: 25px 60px;
                font-size: 1.8rem;
                border-radius: 70px;
            }

            .generate-btn i {
                font-size: 2rem;
            }
        }

        /* Spinner */
        .generate-btn.loading {
            pointer-events: none;
            opacity: 0.7;
        }

        .generate-btn.loading::after {
            content: "";
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.6);
            border-top: 3px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
        }

        @keyframes spin {
            to {
                transform: translateY(-50%) rotate(360deg);
            }
        }


        .prompt-suggestions {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .prompt {
            background-color: var(--card-bg);
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: transform 0.2s, background-color 0.2s;
            font-size: 0.9rem;
        }

        .prompt:hover {
            transform: translateY(-2px);
            background-color: var(--btn-secondary);
        }

        .generated-image {
            max-width: 100%;
            max-height: 600px;
            border-radius: var(--border-radius);
            display: none;
            box-shadow: var(--shadow);
        }


        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal-content {
            background-color: var(--card-bg);
            margin: 5% auto;
            padding: 30px;
            border-radius: var(--border-radius);
            width: 80%;
            max-width: 700px;
            box-shadow: 0 5px 30px rgba(0,0,0,0.3);
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
        }

       .settings-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .setting-group {
            text-align: left;
        }

        .setting-group h3 {
            margin-top: 0;
            margin-bottom: 10px;
            color: var(--text-color);
        }

        /* ðŸ‘‡ Tambahkan ini untuk dukungan layar kecil */
        @media (max-width: 600px) {
            .settings-grid {
                grid-template-columns: 1fr; /* Ubah jadi 1 kolom */
                gap: 16px;
            }

            .setting-group h3 {
                font-size: 1.1rem;
            }
        }


        select,
        input,
        textarea {
            width: 100%;
            padding: 12px 16px; /* Rapi kiri-kanan */
            border-radius: 8px;
            border: 1px solid #ddd;
            background-color: var(--card-bg);
            color: var(--text-color);
            margin-bottom: 15px;
            box-sizing: border-box; /* Pastikan padding tidak merusak lebar */
            font-size: 1rem;
            transition: border 0.2s ease, box-shadow 0.2s ease;
        }

        select:focus,
        input:focus,
        textarea:focus {
            outline: none;
            border-color: #888; /* atau gunakan var(--accent-color) jika ada */
            box-shadow: 0 0 0 2px rgba(100, 100, 255, 0.15); /* efek fokus lembut */
        }


       textarea {
            min-height: 70px;
            resize: vertical;
            padding: 12px 16px; /* atas-bawah 12px, kiri-kanan 16px */
            box-sizing: border-box; /* penting agar padding tidak menambah lebar */
            width: 100%; /* pastikan memenuhi container secara penuh */
            border-radius: var(--border-radius, 8px); /* opsional untuk tampilan halus */
            border: 1px solid #ccc; /* opsional agar terlihat clean */
            font-size: 1rem; /* agar teks nyaman dibaca */
            line-height: 1.5;
        }


        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--text-color);
        }

        .generate-modal-btn {
            background: var(--btn-primary);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1rem;
            border-radius: 8px;
            cursor: pointer;
            display: block;
            margin: 20px auto 0;
            transition: transform 0.2s;
        }

        .generate-modal-btn:hover {
            transform: translateY(-2px);
        }

        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .gallery img {
            width: 100%;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            transition: transform 0.3s;
        }

        .gallery img:hover {
            transform: scale(1.03);
        }

        @media (max-width: 768px) {
            .settings-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 90%;
                padding: 20px;
            }
        }
        
        .image-placeholder {
            width: 100%;
            aspect-ratio: 1 / 1 ;
            background: var(--placeholder-bg-gradient, linear-gradient(135deg, #e0e0e0, #f5f7fa));
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 50px;
            overflow: hidden;
            position: relative;
            transition: aspect-ratio 0.3s ease, background 0.3s ease, box-shadow 0.3s ease;
            box-shadow:
                inset 6px 6px 12px rgba(0, 0, 0, 0.15),
                inset -6px -6px 12px rgba(247, 247, 247, 0.3),
                var(--shadow); /* outer shadow */
        }

        /* âœ¨ Animasi garis mengelilingi */
        .image-placeholder::after {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            border-radius: var(--border-radius);
            background: conic-gradient(
                from 0deg,
                #00ffe7,
                #00c3ff,
                #0077ff,
                #6a00ff,
                #00ffe7
            );
            mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
            -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
            mask-composite: exclude;
            -webkit-mask-composite: destination-out;
            padding: 2px;
            pointer-events: none;
            z-index: 0;
            animation: rotateBorder 4s linear infinite;
            
        }


        .image-placeholder::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.25), transparent);
            pointer-events: none;
            z-index: 1;
        }

        .image-placeholder p {
            font-size: 1.5rem;
            color: var(--placeholder-text);
            font-weight: bold;
            padding: 20px;
            text-align: center;
            position: relative;
            z-index: 2;
        }

        @media (orientation: landscape) {
            .image-placeholder {
                aspect-ratio: 16 / 9;
            }
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --placeholder-bg-gradient: linear-gradient(135deg, #ffffff, #d3d3d3);
                --placeholder-text: #cccccc;
                --shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            }
        }


        .prompt-suggestions h2 {
            margin: 0 0 10px;
            font-size: 1.2rem;
            color: var(--text-color);
           
        }

         .prompt-suggestions .subtext {
            margin: 0 0 10px;
            font-size: 0.8rem;
            color: var(--text-color);
            padding-bottom: 50px;
           
        }

        
        

        /*Spiner*/

        #loadingSpinner {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background-color: rgba(255, 255, 255, 0.75); /* atau rgba(0,0,0,0.5) di dark mode */
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                backdrop-filter: blur(4px);
            }

            .spinner {
                width: 60px;
                height: 60px;
                border: 6px solid #ccc;
                border-top-color: #6a11cb;
                border-radius: 50%;
                animation: spin 1s linear infinite;
            }

            @media (prefers-color-scheme: dark) {
                #loadingSpinner {
                    background-color: rgba(0, 0, 0, 0.6);
                }

                .spinner {
                    border: 6px solid #444;
                    border-top-color: #00eaff;
                }
            }

            @keyframes spin {
                to {
                    transform: rotate(360deg);
                }
            }

          .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); /* ukuran kecil */
            gap: 12px; /* jarak antar item */
            padding-top: 20px;
        }

        .gallery-item {
            width: 100%;
            aspect-ratio: 1 / 1; /* thumbnail kotak, bisa ubah ke 3/4 atau lainnya */
            position: relative;
            overflow: hidden;
            border-radius: var(--border-radius, 12px);
            box-shadow:
                inset 3px 3px 6px rgba(0, 0, 0, 0.15),
                inset -3px -3px 6px rgba(247, 247, 247, 0.3),
                var(--shadow);
            background: var(--placeholder-bg-gradient, linear-gradient(135deg, #e0e0e0, #f5f7fa));
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Gambar dalam gallery */
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: transform 0.3s ease;
        }

        /* Hover zoom effect */
        .gallery-item:hover img {
            transform: scale(1.05);
        }

        /* Responsive: preview lebih besar di desktop */
        @media (min-width: 768px) {
            .gallery-grid {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            }

            .gallery-item {
                aspect-ratio: 3 / 4;
            }
        }

        /* Modal zoom overlay */
        #imageModal {
            display: none;
            position: fixed;
            z-index: 9999;
            top: 0; left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.85);
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        #imageModal img {
            max-width: 90vw;
            max-height: 90vh;
            border-radius: 16px;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
            animation: fadeIn 0.3s ease;
            object-fit: contain;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

       /* Update your existing modal and download button styles */
        #imageModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
        }

        #modalImage {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
        }

        #downloadBtn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: #6a11cb;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: none;
            z-index: 1002; /* Higher than modal's z-index */
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
        }

        #downloadBtn:hover {
            background-color: #4d0d9c;
            transform: scale(1.1);
        }


    </style>
</head>
<body>

    <div id="loadingSpinner" style="display: none;">
    <div class="spinner"></div>
    </div>
    <button class="theme-toggle" id="themeToggle">
        <i class="fas fa-moon"></i>
    </button>

    <div class="container">
        <h1>PixlMuse AI Image Generator</h1>
        </div>
        <div class="image-placeholder" style="display: none;">
    <p>Your AI-generated masterpiece will appear here</p>
    <img id="generatedImage" class="generated-image" alt="AI Generated Image">
    </div>
</div>
    <p><strong>ðŸš¦Feed Realtime AI-Generated ImageðŸš¦</strong> </p>
    <div id="image-feed"></div>

<style>
  #image-feed {
    display: flex;
    overflow-x: auto;
    gap: 16px;
    padding: 16px;
    background: var(--bg-color, #f5f5f5);
    border-radius: 12px;
  }

  .image-card {
    flex: 0 0 auto;
    width: 300px;
    height: 300px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: var(--bg-color);
    border-radius: 12px;
    padding: 12px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.3s ease;
  }

  .image-card.show {
    opacity: 1;
    transform: translateY(0);
  }

  .image-card img {
    max-width: 100%;
    max-height: 220px;
    object-fit: contain;
    border-radius: 8px;
  }

  .image-card p {
  margin-top: 8px;
  font-size: 12px;
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  width: 100%;
  color: var(--text-color)
}

.footer-links {
  display: flex;
  align-items: center;
}

.footer-link {
  color: #9CA3AF;
  margin: 0 0.75rem;
  text-decoration: none;
}

.separator {
  color: #9CA3AF;
}

</style>

<script>
  const container = document.getElementById('image-feed');
  const maxItems = 2;

  const eventSource = new EventSource('https://image.pollinations.ai/feed/');

  eventSource.onmessage = function(event) {
    try {
      const data = JSON.parse(event.data);
      const prompt = data.prompt;

      const keywords = ["cyberpunk", "steampunk", "futuristic", "photorealistic", "fantasi","anime"];
      if (!keywords.some(kw => prompt.toLowerCase().includes(kw))) return;

      const imageUrl = `https://image.pollinations.ai/prompt/${encodeURIComponent(prompt)}?&nologo=true`;

      const div = document.createElement('div');
    div.classList.add('image-card');
    div.innerHTML = `
    <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
    <img 
      src="${imageUrl}" 
      style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;"
      onerror="this.src='https://via.placeholder.com/300?text=Image+error'" 
      alt="${prompt}"
    >
  </div>
  <p>${prompt}</p>
`;

      container.appendChild(div);
      requestAnimationFrame(() => div.classList.add('show'));
      container.scrollLeft = container.scrollWidth;

      if (container.children.length > maxItems) {
        container.removeChild(container.firstChild);
      }

    } catch (err) {
      console.error('Error parsing event data:', err);
    }
  };

  eventSource.onerror = function(err) {
    console.error("EventSource error:", err);
  };
</script>

    </div>
        <button class="generate-btn" id="generateBtn">
        <i class="fas fa-magic"></i> Give Me Prompt
        </button>
    </div>
        <div class="prompt-suggestions">
        <h2>ðŸ’¡Prompt Suggestions</h2>
        </div>

        <div class="prompt-suggestions">
            <div class="prompt" data-prompt="Cyberpunk cityscape at night, neon lights, rain reflections, futuristic">Cyberpunk cityscape at night, neon lights, rain reflections, futuristic</div>
            <div class="prompt" data-prompt="Fantasy castle in the clouds, golden sunset, cinematic lighting">Fantasy castle in the clouds, golden sunset, cinematic lighting</div>
            <div class="prompt" data-prompt="Portrait of a cybernetic woman, soft lighting, intricate details">Portrait of a cybernetic woman, soft lighting, intricate details</div>
            <div class="prompt" data-prompt="Surreal landscape with floating islands, vibrant colors, dreamlike">Surreal landscape with floating islands, vibrant colors, dreamlike</div>
        </div>
        <div id="gallery" class="gallery-grid"></div>
    </div>
    

 

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeModal">&times;</span>
            <h2>Generation Settings</h2>
            
            <div class="settings-grid">
                <div class="setting-group">
                    <h3>Model</h3>
                    <select id="modelSelect">
                        <option value="flux">Flux</option>
                        <option value="GPTImage">Gpt Image</option>
                        
                    </select>
                </div>
                
                <div class="setting-group">
                    <h3>Art Style</h3>
                    <select id="styleSelect">
                        <option value="">Default</option>
                        <option value="digital art">Digital Art</option>
                        <option value="photorealistic">Photorealistic</option>
                        <option value="anime">Anime</option>
                        <option value="oil painting">Oil Painting</option>
                        <option value="watercolor">Watercolor</option>
                        <option value="cyberpunk">Cyberpunk</option>
                        <option value="low poly">Low Poly</option>
                        <option value="pixel art">Pixel Art</option>
                        <option value="concept art">Concept Art</option>
                        <option value="surrealism">Surrealism</option>
                        <option value="impressionism">Impressionism</option>
                        <option value="abstract">Abstract</option>
                        <option value="cartoon">Cartoon</option>
                        <option value="comic book">Comic Book</option>
                        <option value="steampunk">Steampunk</option>
                        <option value="fantasy">Fantasy</option>
                        <option value="sci-fi">Sci-Fi</option>
                        <option value="minimalist">Minimalist</option>
                        <option value="graffiti">Graffiti</option>
                        <option value="chalk drawing">Chalk Drawing</option>
                        <option value="charcoal sketch">Charcoal Sketch</option>
                        <option value="ink drawing">Ink Drawing</option>
                        <option value="vector art">Vector Art</option>
                        <option value="line art">Line Art</option>
                        <option value="pop art">Pop Art</option>
                        <option value="art deco">Art Deco</option>
                        <option value="art nouveau">Art Nouveau</option>
                        <option value="cubism">Cubism</option>
                        <option value="expressionism">Expressionism</option>
                        <option value="futurism">Futurism</option>
                        <option value="gothic">Gothic</option>
                        <option value="renaissance">Renaissance</option>
                        <option value="baroque">Baroque</option>
                        <option value="realism">Realism</option>
                        <option value="street art">Street Art</option>
                        <option value="doodle">Doodle</option>
                        <option value="stained glass">Stained Glass</option>
                        <option value="origami">Origami</option>
                        <option value="paper cut">Paper Cut</option>
                        <option value="claymation">Claymation</option>
                        <option value="chibi">Chibi</option>
                        <option value="manga">Manga</option>
                        <option value="cel shading">Cel Shading</option>
                        <option value="isometric">Isometric</option>
                        <option value="vaporwave">Vaporwave</option>
                        <option value="synthwave">Synthwave</option>
                        <option value="glitch art">Glitch Art</option>
                        <option value="holographic">Holographic</option>
                        <option value="neon">Neon</option>
                        <option value="retro">Retro</option>
                        <option value="vintage">Vintage</option>
                        <option value="grunge">Grunge</option>
                        <option value="sketch">Sketch</option>
                        <option value="silhouette">Silhouette</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <h3>Lighting</h3>
                    <select id="lightingSelect">
                            <option value="">Default</option>
                            <option value="dramatic lighting">Dramatic</option>
                            <option value="soft lighting">Soft</option>
                            <option value="neon lights">Neon</option>
                            <option value="sunset glow">Sunset</option>
                            <option value="cinematic lighting">Cinematic</option>
                            <option value="moody lighting">Moody</option>
                            <option value="high-key lighting">High-Key</option>
                            <option value="low-key lighting">Low-Key</option>
                            <option value="rim lighting">Rim Light</option>
                            <option value="backlighting">Backlight</option>
                            <option value="volumetric lighting">Volumetric</option>
                            <option value="god rays">God Rays</option>
                            <option value="bioluminescent">Bioluminescent</option>
                            <option value="firelight">Firelight</option>
                            <option value="candlelight">Candlelight</option>
                            <option value="moonlight">Moonlight</option>
                            <option value="starlight">Starlight</option>
                            <option value="aurora lighting">Aurora</option>
                            <option value="studio lighting">Studio</option>
                            <option value="chiaroscuro">Chiaroscuro</option>
                            <option value="harsh lighting">Harsh</option>
                            <option value="ambient lighting">Ambient</option>
                            <option value="spotlight">Spotlight</option>
                            <option value="glowing edges">Glowing Edges</option>
                            <option value="fairy lights">Fairy Lights</option>
                            <option value="laser lights">Laser</option>
                            <option value="holographic lighting">Holographic</option>
                            <option value="cyber lighting">Cyber</option>
                            <option value="noir lighting">Noir</option>
                            <option value="golden hour">Golden Hour</option>
                            <option value="blue hour">Blue Hour</option>
                            <option value="overcast lighting">Overcast</option>
                            <option value="stormy lighting">Stormy</option>
                            <option value="underwater lighting">Underwater</option>
                            <option value="neon glow">Neon Glow</option>
                            <option value="luminous fog">Luminous Fog</option>
                            <option value="dreamy glow">Dreamy Glow</option>
                            <option value="dappled light">Dappled Light</option>
                            <option value="sunbeam">Sunbeam</option>
                            <option value="light leak">Light Leak</option>
                            <option value="halo effect">Halo Effect</option>
                            <option value="lens flare">Lens Flare</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <h3>Resolution</h3>
                    <select id="resolutionSelect">
                        <option value="1080x1920">Portrait HD (1080x1920)</option>
                        <option value="1920x1080">Landscape HD (1920x1080)</option>
                        <option value="1024x1024">Square (1024x1024)</option>
                        <option value="720x1280">Portrait Standard (720x1280)</option>
                        <option value="1280x720">Landscape Standard (1280x720)</option>
                    </select>
                </div>
            </div>
            
            <div class="setting-group">
                <h3>Prompt</h3>
                <textarea id="promptInput" placeholder="Describe the image you want to generate..."></textarea>
            </div>
            
            <div class="setting-group">
                <h3>Negative Prompt</h3>
                <textarea id="negativePromptInput" placeholder="What you don't want in the image..."></textarea>
            </div>
            
            <div class="setting-group">
                <label for="batchCount">Batch Count (1-4):</label>
                <input type="number" id="batchCount" min="1" max="4" value="1">
            </div>
            
            <button class="generate-modal-btn" id="generateFromModal">
                <i class="fas fa-magic"></i> Generate Images
            </button>
        </div>
    </div>
    <!-- Modal Zoom Container -->
    <!-- Modal Zoom Container -->
    <div id="imageModal">
    <img id="modalImage" src="" alt="Zoomed Image">
    <button id="downloadBtn" title="Download Image">
        <i class="fas fa-download"></i>
    </button>
</div>
    

        <!--foooter-->
        <footer style="background-color: transparent; color: #9CA3AF; padding: 1rem; text-align: center; font-size: 0.875rem;">
        <div style="margin-bottom: 0.5rem;">
        <div class="footer-links">
        <a href="#" class="footer-link" onclick="showModal('terms')">Terms of Service</a>
        <span class="separator">|</span>
        <a href="#" class="footer-link" onclick="showModal('privacy')">Privacy Policy</a>
        </div>
        <div id="modal" style="display:none; position:fixed; top:0;left:0;width:100%;height:100%;background:#0008;z-index:1000;">
        <div style="background:white; max-width:800px; margin:5% auto; padding:20px; border-radius:10px; position:relative;">
        <button onclick="closeModal()" style="position:absolute;top:10px;right:15px;">âœ–</button>
        <div id="modal-content" style="max-height:70vh; overflow-y:auto;"></div>
        </div>
    </div>
  </div>
</div>

    </div>
    &copy; 2025 | <strong>PixlMuse Inc.</strong> All Rights Reserved.
    </footer>

<script>
    
   document.addEventListener('DOMContentLoaded', function () {
    // DOM Elements
    const generateBtn = document.getElementById('generateBtn');
    const imagePlaceholder = document.querySelector('.image-placeholder p');
    const generatedImage = document.getElementById('generatedImage');
    const loadingSpinner = document.getElementById('loadingSpinner');
    const prompts = document.querySelectorAll('.prompt');
    const themeToggle = document.getElementById('themeToggle');
    const settingsModal = document.getElementById('settingsModal');
    const closeModal = document.getElementById('closeModal');
    const generateFromModal = document.getElementById('generateFromModal');
    const promptInput = document.getElementById('promptInput');
    const gallery = document.getElementById('gallery'); // âœ… sesuai ID HTML-mu
    const downloadBtn = document.getElementById('downloadBtn');

    // ðŸŒ™ Theme Toggle
    let darkMode = localStorage.getItem('darkMode') === 'true';
    updateTheme();

    themeToggle.addEventListener('click', function () {
        darkMode = !darkMode;
        localStorage.setItem('darkMode', darkMode);
        updateTheme();
    });

    function updateTheme() {
        document.body.classList.toggle('dark-mode', darkMode);
        themeToggle.innerHTML = darkMode ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
    }

    // ðŸ“¦ Modal Handling
    generateBtn.addEventListener('click', () => openModal());
    closeModal.addEventListener('click', () => closeModalWindow());
    window.addEventListener('click', e => { if (e.target === settingsModal) closeModalWindow(); });

    function openModal() {
        settingsModal.style.display = 'block';
        document.body.style.overflow = 'hidden';
    }

    function closeModalWindow() {
        settingsModal.style.display = 'none';
        document.body.style.overflow = 'auto';
    }

    // ðŸŽ¯ Prompt Selection
    prompts.forEach(prompt => {
        prompt.addEventListener('click', function () {
            promptInput.value = this.getAttribute('data-prompt');
            prompts.forEach(p => p.style.backgroundColor = '');
            this.style.backgroundColor = 'rgba(106, 17, 203, 0.2)';
        });
    });

    // ðŸŽ¬ Generate from Modal
    generateFromModal.addEventListener('click', async function () {
        closeModalWindow();
        await generateImagesFromPrompt();
    });

    // ðŸš€ Main Generator
        async function generateImagesFromPrompt() {
        const prompt = promptInput.value.trim();
        if (!prompt) return alert('Please enter a prompt');

        const model = document.getElementById('modelSelect').value;
        const style = document.getElementById('styleSelect').value;
        const lighting = document.getElementById('lightingSelect').value;
        const resolution = document.getElementById('resolutionSelect').value;
        const negativePrompt = document.getElementById('negativePromptInput').value.trim();
        const batchCount = Math.min(4, Math.max(1, parseInt(document.getElementById('batchCount').value)));

        const finalPrompt = enhancePrompt(prompt, style, lighting, model);
        const [width, height] = resolution.split('x').map(Number);

        // UI Update
        imagePlaceholder.style.display = 'none';
        generatedImage.style.display = 'none';
        gallery.innerHTML = '';
        

        try {
            for (let i = 0; i < batchCount; i++) {
                const url = buildPollinationsUrl(finalPrompt, model, width, height, negativePrompt);
                await addImageToGallery(url, i);
            }

            // First image to placeholder
            const firstImg = gallery.querySelector('img');
            if (firstImg) {
                generatedImage.src = firstImg.src;
                generatedImage.style.display = 'block';
            }

        } catch (error) {
            console.error('Generation error:', error);
            alert('Failed to generate image. Please try again.');
        } finally {
            loadingSpinner.style.display = 'none';
        }
    }

    // âœ¨ Prompt Enhancer
        function enhancePrompt(base, style, lighting, model) {
        let enhanced = base;
        if (style) enhanced += `, ${style}`;
        if (lighting) enhanced += `, ${lighting}`;

        if (model.includes("flux")) {
            enhanced += ", trending on artstation, cinematic, dramatic lighting";
        } else if (model.includes("gptimage")) {
            enhanced += ", ultra detailed, soft light, masterpiece, high definition";
        }

        return enhanced;
    }

    // ðŸŒ Build Final Image URL
    function buildPollinationsUrl(prompt, model, width, height, negativePrompt = '', seed = null) {
    const finalSeed = seed || Math.floor(Math.random() * 1000000).toString();
    const url = `https://image.pollinations.ai/prompt/${encodeURIComponent(prompt)}`;

    const rawParams = {
        width: width || 720,
        height: height || 1280,
        enhancer: 'true',
        nologo: 'true',
        seed: finalSeed,
    };

    // Optional params
    if (model && model !== 'flux') rawParams.model = model;
    if (negativePrompt) rawParams.negative_prompt = negativePrompt;

    const paramString = new URLSearchParams(rawParams).toString();
    return `${url}?${paramString}`;
}

    // ðŸŽ¨ Prompt Enhancer
    function enhancePrompt(base, style, lighting, model) {
    let enhanced = base;
    if (style) enhanced += `, ${style}`;
    if (lighting) enhanced += `, ${lighting}`;

    if (model.includes("flux")) {
        enhanced += ", trending on artstation, cinematic, dramatic lighting";
    } else if (model.includes("gptimage")) {
        enhanced += ", ultra detailed, soft light, masterpiece, high definition";
    }

    return enhanced;
}

    // ðŸ–¼ï¸ Add Static Image to Gallery (without loading check)
    function addImageToGallery(imageUrl) {
    const imgContainer = document.createElement('div');
    imgContainer.className = 'gallery-item';

    const img = document.createElement('img');
    img.src = imageUrl;
    img.alt = 'Generated Image';
    img.loading = 'lazy';
    
    imgContainer.appendChild(img);
    gallery.appendChild(imgContainer); 
    }

    
   });

   // Modal Zoom
        const imageModal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');

        // Saat klik gambar galeri
        document.getElementById('gallery').addEventListener('click', function (e) {
            if (e.target.tagName === 'IMG') {
                modalImage.src = e.target.src;
                imageModal.style.display = 'flex';
                document.body.style.overflow = 'hidden'; // Lock scroll
            }
        });

        // Klik luar gambar menutup modal
        imageModal.addEventListener('click', function (e) {
            if (e.target === imageModal || e.target === modalImage) {
                imageModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });
         
        // Update your existing modal zoom code with this:

        const downloadBtn = document.getElementById('downloadBtn');
        let currentImageUrl = '';

        // When clicking gallery images
        document.getElementById('gallery').addEventListener('click', function (e) {
        if (e.target.tagName === 'IMG') {
        currentImageUrl = e.target.src;
        modalImage.src = currentImageUrl;
        imageModal.style.display = 'flex';
        downloadBtn.style.display = 'flex';
        document.body.style.overflow = 'hidden';
            }
        });

        // Close modal
        imageModal.addEventListener('click', function (e) {
            if (e.target === imageModal || e.target === modalImage) {
                imageModal.style.display = 'none';
                downloadBtn.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });

        // Enhanced Download Functionality
            downloadBtn.addEventListener('click', async function() {
            if (!currentImageUrl) return;
            
            try {
                // 1. Show loading state
                const originalIcon = downloadBtn.innerHTML;
                downloadBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                downloadBtn.style.pointerEvents = 'none';
                
                // 2. Create beautiful filename
                const now = new Date();
                const pad = num => num.toString().padStart(2, '0');
                const dateStr = [
                    now.getFullYear(),
                    pad(now.getMonth() + 1),
                    pad(now.getDate())
                ].join('-');
                const timeStr = [
                    pad(now.getHours()),
                    pad(now.getMinutes()),
                    pad(now.getSeconds())
                ].join('-');
                const filename = `PixlMuse_${dateStr}_${timeStr}.jpg`;
        
                // 3. Fetch with error handling
                const response = await fetch(currentImageUrl, {
                    cache: 'no-store',
                    mode: 'cors'
                });
                
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                if (!response.headers.get('content-type').includes('image')) {
                    throw new Error('Downloaded file is not an image');
                }
        
                // 4. Create and trigger download
                const blob = await response.blob();
                const blobUrl = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = blobUrl;
                a.download = filename;
                a.style.display = 'none';
                document.body.appendChild(a);
                a.click();
        
                // 5. Cleanup with delay
                setTimeout(() => {
                    document.body.removeChild(a);
                    URL.revokeObjectURL(blobUrl);
                    downloadBtn.innerHTML = originalIcon;
                    downloadBtn.style.pointerEvents = 'auto';
                    
                    // 6. Show brief confirmation
                    const confirmation = document.createElement('div');
                    confirmation.textContent = 'âœ“ Downloaded!';
                    confirmation.style.position = 'fixed';
                    confirmation.style.bottom = '80px';
                    confirmation.style.right = '30px';
                    confirmation.style.backgroundColor = '#4CAF50';
                    confirmation.style.color = 'white';
                    confirmation.style.padding = '8px 16px';
                    confirmation.style.borderRadius = '4px';
                    confirmation.style.zIndex = '1003';
                    document.body.appendChild(confirmation);
                    
                    setTimeout(() => {
                        document.body.removeChild(confirmation);
                    }, 2000);
                }, 100);
        
            } catch (error) {
                console.error('Download error:', error);
                downloadBtn.innerHTML = '<i class="fas fa-download"></i>';
                downloadBtn.style.pointerEvents = 'auto';
                
                // Show error message
                const errorMsg = document.createElement('div');
                errorMsg.textContent = 'âš  Download failed';
                errorMsg.style.position = 'fixed';
                errorMsg.style.bottom = '80px';
                errorMsg.style.right = '30px';
                errorMsg.style.backgroundColor = '#f44336';
                errorMsg.style.color = 'white';
                errorMsg.style.padding = '8px 16px';
                errorMsg.style.borderRadius = '4px';
                errorMsg.style.zIndex = '1003';
                document.body.appendChild(errorMsg);
                
                setTimeout(() => {
                    document.body.removeChild(errorMsg);
                }, 2000);
            }
        });



    
        
        //term privacy
            function showModal(type) {
            const fileMap = {
            terms: "/terms.html",
            privacy: "/privacy.html"
        };

        fetch(fileMap[type])
        .then(response => {
        if (!response.ok) throw new Error("Failed to load content");
        return response.text();
        })
        .then(html => {
        document.getElementById("modal-content").innerHTML = html;
        document.getElementById("modal").style.display = "block";
        })
            .catch(error => {
      document.getElementById("modal-content").innerHTML = "<p>Gagal memuat konten.</p>";
      document.getElementById("modal").style.display = "block";
      console.error(error);
    });
    }

    function closeModal() {
    document.getElementById("modal").style.display = "none";
    }
    const fileMap = {
    terms: "terms.html",
    privacy: "privacy.html"
    };


        
</script>
</body>
</html>
